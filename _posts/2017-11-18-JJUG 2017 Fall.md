---
layout: post
title: JJUG 2017 Fall
---

## OpenJDK 参加入門　DAVID BUCK

- セッションの目的
    - JDKコードを弄ってビルド
    - JDKコードに貢献する
- OpenJDKプロジェクト
    - JavaSEのオープンソースの実装
    - JavaOne2006で発表
    - OpenJDK7→OpenJDK6
        - 企業が欲しかったのはすでに使われているものがほしかった
        - 7から機能をそぎ落として作った
    - OpenJDK != OracleJDK
        - OracleJDKは購入する
        - クローズドソース
- Mercurialを使用してバージョン管理している
    - 分散型のバージョン管理システム
    - Gitとあまり変わらない
        - リビジョンのID形式が異なる
        - ローカル:グローバル
    - 自分の更新をpush
    - 他人の更新をpull
    - Forests
        - 複数のツリーを集めた状態
        - JDKをビルド出来る
        - Forestの入手方法
            - Forestのルートをclone
            - get_source.shスクリプト実行
- ビルド方法
    - JDK8以降が簡単に出来るようになった
        - sh configure
            - 足りないパッケージを検出、入手方法を教えてくれる
            - すべてのプラットフォームで
            - 重要なオプション
                - Debugビルド
                - ccashe無効化
                - Bookstrap JDKのパース
                - configureスクリプトのdebug出力
- テストケース
    - 殆どの変更はテストケースが必要
        - 新しい機能のテスト
        - バグの修正をテスト
    - Jtregというテストフレームワークが利用されている
- プロセス・ルール
    - バグの修正がやりやすい
        - 新機能追加は難しい
            - 政治的な意味で
    - 2つのバグインターフェースシステム
        - bugs.java.com
            - ユーザ向け(貢献者向けではない) 
            - 単純
                - 検索機能が乏しい
            - バグの登録が誰でもできる
        - JDK Bug System
            - Jiraベース
                - カスタマイズを避けた
                - Jiraとの違い
                    - Backports・fixed version
                    - バグ検索機能の拡張
- 新規レポートを作るには
    - OpenJDK IDがない場合は
        - OpenJDKメールアリアスで取得する
- OpenJDKメールアリアス
    - オープン参加
    - アーカイブされている
    - まとめ機能
    - メールを送る前に登録することを推奨
---
## JJUG初心者の為のJava/JJUG講座
- Duke
    - BSDライセンス
    - 改変可能
- 何故この話をするのか
    - ベンダー主催
        - お客様として参加
    - コミュニティ主催
        - みんなで創り上げる
    - Javaのユーザはエンプラ業界のエンジニア
    - やはりコミュ二ティに慣れていない
    - JJUGとは何かCCCとは何かを伝える
- Javaを知る為のキーワード
    - SunMicroSystems
        - 生みの親
        - UNIX OSであるSolarisが有名
        - 積極的な情報公開やオープンソースへの関わりでエンジニアのファンが非常に多かった
            - 当時マイクロソフトと戦う勇者
    - Oracle
        - オープンなSunとは対照的な気質で知られ、買収を残念がる技術者が多かった
            - JenkinsなどOSS関連では多くの事件が起きている
        - Javaは維持されてJavaOneも残った
        - 一方で顧客の声をよく聞く企業である
            - Sunはビジョンを優先しすぎることが多かった
    - Java
        - 特徴
            - 静的型付け
            - OS非依存
    - Java VM
        - Write Once, run everywhere
        - 仮想マシンによって実行環境差異を吸収
        - バイトコードであればどんな言語でもよい
    - 仕様と実装
        - 標準仕様を決めて各社が実装する
            - JavaSE OpenJDK J9
            - JavaEE WebSphere WebLogic Payara GlassFish
                - 部分的な実装としてはTomcat Jettyなど
        - 各社は標準をベースに独自の拡張をすることで差別化している
            - 安定性、可用性、保守性の機能を追加
    - JCP
        - 標準Javaの仕様を策定するプログラム
        - Java仕様を決めているのはOracleではない
            - 過去はSun中心にベンダーだけが決定
                - その後ユーザグループも参加可能
            - 誰でも意見が言える
        - プロセス
            - 1 JSRが提出される
            - 2 EGの組成
            - 3 ドラフトの作成と意見収集
            - 4 最終承認投票
            - 5 仕様のリリース
    - OpenJDK
        - 参照実装
        - 経緯
            - 当時のJavaSEは仕様が肥大化しており各社個別実装が厳しくなってきた
            - オープンソースでの共同開発とその上商用カスタマイズというプロセスが必要だった
            - Apache Harmony（勝手にオープンソース化したもの）
                - 認定を要求するもSunが拒否
                    - その為ApaceがすべてのJCP投票に拒否
                - Androidが採用
                    - 今はOpenJDKを採用している
                    - 結果としてOracleがGoogleを訴えることに
                        - JavaMEのモバイル領域が侵されてしまった
    - オープンソース
        - Javaの成功はSunのオープンな文化
            - しかし、企業としてはオープンソースに苦しめられた。儲からない
        - オープンソースの戦略的な活用
            - IBMはLinuxやTomcatで成功
                - サポートで儲けている
            - 現在はMicrosoftが積極的に活用中
    - EE4J
        - JavaEEの開発プロジェクトがEclipse主管に
        - OracleがJavaEEの開発から手を引く
            - そもそもJavaEEの開発が停滞ぎみでコミュニティでも問題視されていた
            - 今後の開発スピードアップに期待
- JUG
    - 世界中にあるJavaコミュニティの総称
    - あくまでも「ユーザ」の集まり
        - Oracleは支援する立場で各国で関係性は異なる
        - 北米では関係が薄く、アジア圏では関係が強め
    - 世界のJUG
        - 有名どころはJCPにも積極的に参加
        - Devoxx
            - 2001年に始まったカンファレンス
                - 主催がベルギーのJUG
    - JJUG
        - 2007年に設立
        - ちょうどSunが落ち目になった頃
        - 規模
            - 7000人以上
            - CCCは1000人規模
        - 世界でも大きなJUG
            - JavaChampionが2名
            - 認知度が高め
                - ロゴTが何故か人気
            - しかし、JCPなどには積極的な参加ができていない
        - 活動
            - イベントの実施
                - CCC
                - ナイトセミナー
            - 基本的にはボランティア
        - お金
            - CCC2回で800万
            - すべてCCCのスポンサーで賄われている
        - さらにもう一歩
            - 仕事に役立てる
            - 同僚に話す
            - SNSに書く
            - イベントに登壇する
            - CCCのボランティアスタッフになる
            - CCCの幹事になる
---

## Spring Bootの本当の理解ポイント

- SpringBootでSpringを始めた人向け
- SpringFrameWorkの問題点
    - CoCではない
- https://www.slideshare.net/masatoshitada7/spring-boot-jjug
---
## SpringSecurityにできることできないこと
- https://qiita.com/opengl-8080/items/6dc37f8b77abb5ae1642
- セッションIDはServletの仕事
    - サーブレットコンテナの実装に依存されている
---
## Javaが「かける」から「できる」になれる！メモリ節約ノウハウ話
- slideshareにあがる
- メモリ使用量やリークに注意しないとOOMが発生
    - リークしなくてもメモリの8,9割使うとスループットが落ちる
- Javaオブジェクトの構造
    - 管理用のデータ領域を先頭にもつ
        - _mark オブジェクトの状態
        - _kclass クラスデータの参照
    - どのオブジェクトも持っている領域
    - ラッパークラスのオブジェクトは管理領域＋保持している基本型サイズ＋パディングのメモリを消費
    - 大抵の場合単一ではなくオブジェクト内にオブジェクトへの参照を持っている
- メモリ使用量の削減
    - 基本型を使う
        - 基本型の配列に押し込む
            - メモリ使用量が3分の1以下に
            - だだしソースの可読性メンテナンス性が低下
            - BitSet 1ビット * 要素数→答え
                - 整数値の範囲が予めわかっている場合はBitSetが有用
                - データ依存にはなるけど...
- ライブラリの利用
    - Java Collection FrameWork
        - 使いやすい、高品質
        - ただしメモリ使用量は...
    - Autoboxsing
        - 一見基本型を使っているがラッパークラスに
    - 省メモリコレクションライブラリを使おうq

---
## 新しいプログラミング言語の学び方
- スキルやプログラミングスタイルの幅を広げたい
- 純粋に楽しみたい為
- 学ぶ手段としてHTTPサーバを作成することが良いよ
- 何故HTTPサーバ?
    - 新しい言語を学ぶ時
        - HelloWorld
        - FizzBuzz
        - 本読む
        - ToDoアプリの作成
        - Webサービス
            - WebサービスにはDBがある
            - Webサービスには画面がある
                - それってやりたいことなの？
                    - 別にDBや画面を作りたいわけではない
    - HTTPサーバ
        - Web開発に必要な要素を一通り触れる
        - クライアントからの接続を待ち受ける
        - HTTPの使用はRFCに記載されているよ
        - 理想はPythonのHTTPサーバ
- Scala
    - Javaとの相互運用性
    - 簡潔性
    - 静的型付け
    - Scalaってバリバリの関数型言語?
        - オブジェクト指向と関数型の「統合」
- Clojure
    - Lisp
    - 関数型プログラミングの為の言語
    - Javaとの相互運用性
    - 並行処理のために設計
- 作り始めるコツ
    - 難しく考えすぎない
    - n年後にもう一度作り直すと成長を感じられる
- Socketの扱い
    - 通信におけるエンドポイントを表現したデータモデル
    - InputStream
    - OutputStream
- 正規表現
    - SocketのInputStreamからリクエストの要素を抽出したい
    - Java
        - 名前付きグループ
    - Scala
        - パターンマッチ
            - 値に一致するだけではなくかたや構造でも分岐
            - 正規表現オブジェクトに対してもマッチさせられる
            - 今後Javaにも入るかも?
        - Option型
            - JavaでいうOptional型
    - Clojure
        - re-find
            - 正規表現にマッチした文字列を取得
        - zipmap
            - 強力なコレクションライブラリはClojureの特徴
- リソースの解放
    - Java
        - try with resource
    - Scala
        - Loan Pattern
            - 借りたら返すを確実に行う
            - 制御構造に見えて実はメソッド
    - Clojure
        - with-open
- 並行処理
    - JVM言語なのでマルチスレッドに
    - Java
        - Thread
        - ExecutorService
    - Scala
        - Future
    - Clojure
        - thread他
        - IOバウンド　CPUバウンド
- 文字列の扱い
    - Java
        - ＋とかStringBuilder
    - Scala
        - String Interpolation
            - ちょっとしたテンプレートエンジン
        - 改行はTripleQuote
    - Clojure
        - str
- 既に知っていることとdiffをとる
    - 新しい考えや言語特有の考えが見えてくる
---
